--Because some models are terribly made and require different drawing than others :/
MOAT_MODEL_POS = MOAT_MODEL_POS or {}
MOAT_MODEL_POS["models/modified/glasses01.mdl"] = {5.5, Angle(0, 45, 0), Vector(0, 0, 35)}
MOAT_MODEL_POS["models/modified/hat01_fix.mdl"] = {4.5, Angle(15, 45, 5), Vector(0, 0, 35)}
MOAT_MODEL_POS["models/modified/glasses02.mdl"] = {1.05, Angle(-14, 45, 0), Vector(0, -3, 0.2)}
MOAT_MODEL_POS["models/sal/pig.mdl"] = {4, Angle(-5, 15, 0), Vector(0, -3, 29)}
MOAT_MODEL_POS["models/modified/hat03.mdl"] = {5, Angle(25, 0, 0), Vector(0, 0, 36)}
MOAT_MODEL_POS["models/modified/hat04.mdl"] = {1.3, Angle(0, 0, 0), Vector(-1, 0, 2.5)}
MOAT_MODEL_POS["models/sal/halloween/doctor.mdl"] = {1.1, Angle(0, 35, 0), Vector(0, -5, 0)}
MOAT_MODEL_POS["models/modified/hat08.mdl"] = {4, Angle(25, 20, -10), Vector(0, 2, 40)}
MOAT_MODEL_POS["models/modified/hat07.mdl"] = {1.05, Angle(5, 20, 0), Vector(0, 0, 5)}
MOAT_MODEL_POS["models/sal/acc/fix/beerhat.mdl"] = {4, Angle(25, 20, 0), Vector(0, 0, 34)}
MOAT_MODEL_POS["models/sal/fox.mdl"] = {2.1, Angle(-5, 15, 0), Vector(0, -3, 12)}
MOAT_MODEL_POS["models/sal/owl.mdl"] = {2.1, Angle(-5, 15, 0), Vector(-2, -3, 12)}
MOAT_MODEL_POS["models/sal/wolf.mdl"] = {2.1, Angle(-5, 15, 0), Vector(-1, -3, 10)}
MOAT_MODEL_POS["models/sal/cat.mdl"] = {2.1, Angle(-5, 15, 0), Vector(0, -3, 12)}
MOAT_MODEL_POS["models/sal/bear.mdl"] = {2.1, Angle(-5, 15, 0), Vector(-2, -3, 12)}
MOAT_MODEL_POS["models/sal/hawk_1.mdl"] = {2.1, Angle(-5, 15, 0), Vector(-3, -1, 12)}
MOAT_MODEL_POS["models/sal/hawk_2.mdl"] = {2.1, Angle(-5, 15, 0), Vector(-3, -1, 12)}
MOAT_MODEL_POS["models/sal/acc/fix/mask_2.mdl"] = {4, Angle(0, 30, 0), Vector(0, 0, 32)}
MOAT_MODEL_POS["models/sal/acc/fix/mask_4.mdl"] = {4, Angle(0, 30, 0), Vector(0, 0, 30)}
MOAT_MODEL_POS["models/modified/mask6.mdl"] = {4, Angle(0, 30, 0), Vector(0, 0, 30)}
MOAT_MODEL_POS["models/sal/acc/fix/scarf01.mdl"] = {3.7, Angle(0, 30, 0), Vector(0, 0, -22)}
MOAT_MODEL_POS["models/sal/gingerbread.mdl"] = {4, Angle(0, 30, 0), Vector(0, 0, 30)}

MOAT_MODEL_POS["models/modified/backpack_1.mdl"] = {4, Angle(0, 200, 0), Vector(-50, -25, 25)}
MOAT_MODEL_POS["models/modified/backpack_2.mdl"] = {4, Angle(0, 200, 0), Vector(-50, -25, 25)}
MOAT_MODEL_POS["models/modified/backpack_3.mdl"] = {4, Angle(0, 200, 0), Vector(-50, -25, 25)}
MOAT_MODEL_POS["models/modified/bandana.mdl"] = {4, Angle(0, 0, 0), Vector(-5, 0, 30)}
MOAT_MODEL_POS["models/weapons/w_notmic_hkump.mdl"] = {1.1, Angle(5, 5, 15), Vector(-3, 5, 4)}
MOAT_MODEL_POS["models/weapons/w_rifl_msbs.mdl"] = {1.5, Angle(5, 10, 15), Vector(-3, 5, 7)}
MOAT_MODEL_POS["models/weapons/w_manur_mr_96.mdl"] = {1.2, Angle(-5, 25, 15), Vector(-3.5, -3, -3)}
MOAT_MODEL_POS["models/weapons/tfa_fo4/w_deliverer.mdl"] = {5, Angle(0, 160, -15), Vector(-18, 1, -2)}
MOAT_MODEL_POS["models/weapons/doi/w_springfield.mdl"] = {1.5, Angle(0, 0, 0), Vector(-13, 5, -2)}

MOAT_MODEL_POS["models/weapons/w_sig2_p228.mdl"] = {3.1, Angle(0, -10, 10), Vector(-24, 6, -5)}
MOAT_MODEL_POS["models/weapons/w_pist_cz75.mdl"] = {1.5, Angle(0, 20, 20), Vector(-5.5, -5, -4)}
MOAT_MODEL_POS["models/weapons/w_pist_cm1911.mdl"] = {8, Angle(0, 220, 0), Vector(-90, 46, -50)}
MOAT_MODEL_POS["models/weapons/w_mossberg_590a1.mdl"] = {1.5, Angle(0, 0, 0), Vector(-13, 5, -2)}
MOAT_MODEL_POS["models/weapons/w_tak_mp5.mdl"] = {1.9, Angle(0, 0, 10), Vector(-14, -5, -8)}
MOAT_MODEL_POS["models/weapons/zaratusa/golden_deagle/w_golden_deagle.mdl"] = {1.8, Angle(-10, 100, 0), Vector(-9, -3, 0)}
MOAT_MODEL_POS["models/weapons/m4a1/w_m4a1.mdl"] = {1.5, Angle(0, 0, 100), Vector(-13, 0, 0)}

MOAT_MODEL_POS["models/weapons/scorpion/w_ev03.mdl"] = {1.5, Angle(1, -7, 15), Vector(-8, 2, -1)}
MOAT_MODEL_POS["models/weapons/w_vss_sg552.mdl"] = {1.07, Angle(11,0,0),Vector(-3.7,2,2.4)}
MOAT_MODEL_POS["models/weapons/w_bbenelli_m4.mdl"] = {1.6, Angle(0, 10, 20), Vector(-18, -5, -6)}

MOAT_MODEL_POS["models/weapons/w_diamond_mc_pickaxe.mdl"] = {1.8, Angle(35, -20, 30), Vector(-3, 0, 0)}
MOAT_MODEL_POS["models/weapons/w_diamond_mc_sword.mdl"] = {1.8, Angle(15, -125, -50), Vector(3, -5, -8)}
MOAT_MODEL_POS["models/weapons/w_knife_f.mdl"] = {0.8, Angle(-25, 15, -10), Vector(7, 2, 3.5)}
MOAT_MODEL_POS["models/weapons/w_katana.mdl"] = {1.8, Angle(25, 0, 45), Vector(0, 0, 0)}
MOAT_MODEL_POS["models/weapons/v_crewbar.mdl"] = {3, Angle(0, 0, 0), Vector(-75, -10, 0)}
MOAT_MODEL_POS["models/tiggomods/weapons/ACIII/w_Tomahawk.mdl"] = {1.3, Angle(10, 150, 0), Vector(10, -10, -5)}
MOAT_MODEL_POS["models/weapons/w_knife_ree_toyhammer.mdl"] = {1.1, Angle(0, 0, 0), Vector(0, 0, -2)}
MOAT_MODEL_POS["models/weapons/w_pvp_swd.mdl"] = {2, Angle(-85, 0, 0), Vector(15, -20, -15)}
MOAT_MODEL_POS["models/weapons/w_psmartpen.mdl"] = {1.9, Angle(-45, 0, 0), Vector(-5, -5, 0)}
MOAT_MODEL_POS["models/weapons/w_vir_doubleb.mdl"] = {1.2, Angle(0, 15, 0), Vector(-8, 0, 0)}
MOAT_MODEL_POS["models/weapons/w_vir_flakhg.mdl"] = {1.9, Angle(10, -10, 0), Vector(-6, 0, 3)}
MOAT_MODEL_POS["models/weapons/w_pvp_patriotmg.mdl"] = {2.1, Angle(0, 10, 0), Vector(-3, 0, 0)}
MOAT_MODEL_POS["models/weapons/w_pvp_ragingb.mdl"] = {1.4, Angle(0, 25, 15), Vector(-6.5, -7, -3.5)}
MOAT_MODEL_POS["models/weapons/w_rcp120.mdl"] = {1.5, Angle(5, -10, 0), Vector(-5, 2, 0)}
MOAT_MODEL_POS["models/weapons/w_pvp_semiauto.mdl"] = {1.3, Angle(0, 15, 5), Vector(-3.2, -3, -3)}
MOAT_MODEL_POS["models/weapons/w_pistol.mdl"] = {2.7, Angle(5, -190, -5), Vector(-9, 0, -3)}
MOAT_MODEL_POS["models/weapons/w_pvp_s12.mdl"] = {1.1, Angle(0, 175, -5), Vector(3, 8, 7)}
MOAT_MODEL_POS["models/weapons/w_pvp_supershoty.mdl"] = {1.98, Angle(0, 10, 0), Vector(-18, 0, 0)}
MOAT_MODEL_POS["models/weapons/w_pvp_tom.mdl"] = {1.08, Angle(-10, 25, 15), Vector(-5.1, 0, 1)}
MOAT_MODEL_POS["models/weapons/w_vir_9mm1.mdl"] = {1.4, Angle(-5, 25, 10), Vector(-4, -5, -4)}
MOAT_MODEL_POS["models/weapons/w_pvp_xm8.mdl"] = {1, Angle(0, 20, 15), Vector(-5, 0, 3)}
MOAT_MODEL_POS["models/weapons/w_pvp_neslg.mdl"] = {1, Angle(15, -135, 0), Vector(-5, 13, 0)}
MOAT_MODEL_POS["models/weapons/w_smg_mp40w.mdl"] = {1.5, Angle(0, 10, 10), Vector(-18, 0, 1)}
MOAT_MODEL_POS["models/weapons/b_1911.mdl"] = {2.5, Angle(5, -100, 5), Vector(-6, 0, -4)}
MOAT_MODEL_POS["models/weapons/b_ak47.mdl"] = {2.2, Angle(10, -105, -5), Vector(-5, 1, 0)}
MOAT_MODEL_POS["models/weapons/b_m3s90.mdl"] = {1.6, Angle(10, -105, -5), Vector(-15, 1, 0)}
MOAT_MODEL_POS["models/weapons/b_changfeng.mdl"] = {1.5, Angle(20, -95, -5), Vector(6, -5, 0)}
MOAT_MODEL_POS["models/weapons/b_deserteagle.mdl"] = {2.4, Angle(5, -100, 10), Vector(-7, 0, -4)}
MOAT_MODEL_POS["models/weapons/b_g3a3.mdl"] = {1.6, Angle(10, -105, -5), Vector(-5, 4, 0)}
MOAT_MODEL_POS["models/weapons/b_famas.mdl"] = {1.9, Angle(10, -95, -5), Vector(5, -4, 0)}
MOAT_MODEL_POS["models/weapons/b_g36.mdl"] = {1.9, Angle(10, -100, -5), Vector(-3, -5, 0)}
MOAT_MODEL_POS["models/weapons/b_glock20.mdl"] = {4, Angle(5, -95, 5), Vector(-8, -4, -4)}
MOAT_MODEL_POS["models/weapons/b_m14.mdl"] = {2.9, Angle(10, -105, -5), Vector(-60, -6, -20)}
MOAT_MODEL_POS["models/weapons/b_m24.mdl"] = {2, Angle(10, -105, -5), Vector(-30, 5, -2)}
MOAT_MODEL_POS["models/weapons/b_m4.mdl"] = {1.5, Angle(10, -100, -5), Vector(-4, 1, 0)}
MOAT_MODEL_POS["models/weapons/b_92f.mdl"] = {6.5, Angle(5, -95, 5), Vector(-25, -9, -15)}
MOAT_MODEL_POS["models/weapons/b_92sup.mdl"] = {9, Angle(5, -105, 7), Vector(-83, -9, -45)}
MOAT_MODEL_POS["models/weapons/b_mac11.mdl"] = {3.5, Angle(-5, -90, 10), Vector(-8, -5, -8)}
MOAT_MODEL_POS["models/weapons/b_mp5.mdl"] = {3.5, Angle(0, -90, -5), Vector(-11, -20, -10)}
MOAT_MODEL_POS["models/weapons/b_ots33.mdl"] = {3, Angle(5, -100, 5), Vector(-6, -0, -2)}
MOAT_MODEL_POS["models/weapons/b_sako.mdl"] = {1.5, Angle(10, -105, -5), Vector(-8, 1, 0)}
MOAT_MODEL_POS["models/weapons/b_sg550.mdl"] = {1.5, Angle(10, -105, -5), Vector(-11, 1, 0)}
MOAT_MODEL_POS["models/weapons/b_sr25.mdl"] = {1.6, Angle(10, -105, -5), Vector(-15, 5, 0)}
MOAT_MODEL_POS["models/weapons/b_sterling.mdl"] = {2.9, Angle(5, -95, -10), Vector(-5, -20, -5)}
MOAT_MODEL_POS["models/weapons/b_sterling_sil.mdl"] = {1.8, Angle(10, -95, -0), Vector(-5, -2, 0)}
MOAT_MODEL_POS["models/weapons/b_mc51.mdl"] = {1.8, Angle(10, -95, -2), Vector(-5, -2, 0)}
MOAT_MODEL_POS["models/weapons/w_bo2_peacekeeper.mdl"] = {1.9, Angle(-4, 178, -10), Vector(8, 3, -4)}

MOAT_MODEL_POS["models/custom_prop/moatgaming/aku/aku.mdl"] = {0.9, Angle(0, 120, 0), Vector(1, 0, 5)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/alien/alien.mdl"] = {1.7, Angle(0, 120, -24), Vector(8, 4, -10)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/anonymous/anonymous.mdl"] = {.9, Angle(-10, 45, 0), Vector(1, -3, 0)} --https://steamcommunity.com/profiles/76561198066398047 --https://steamcommunity.com/profiles/76561198035642379
MOAT_MODEL_POS["models/custom_prop/moatgaming/apeescape/apeescape.mdl"] = {1.1, Angle(0, 45, 0), Vector(0, 0.3, 0.8)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/arkham/arkham.mdl"] = {5.5, Angle(0, 120, 0), Vector(0, 0, -30)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/bane/bane.mdl"] = {2.5, Angle(0, 100, -15), Vector(0, 0, -10)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/bender/bender.mdl"] = {1.5, Angle(0, 120, -5), Vector(-4, -5, 0)} --https://steamcommunity.com/profiles/76561198370186210
MOAT_MODEL_POS["models/custom_prop/moatgaming/billy/billy.mdl"] = {1.2, Angle(0, 20, 0), Vector(0, 0, 0)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/bondrewd/bondrewd.mdl"] = {1.8, Angle(-3, 120, -45), Vector(-5, 3, -1)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/bunnyhood/bunnyhood.mdl"] = {2.5, Angle(0, 120, -15), Vector(-15, -20, -13)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/crusaders/crusaders.mdl"] = {1.4, Angle(0, 20, 0), Vector(-5, -5, -3)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/daft/daft.mdl"] = {4.7, Angle(-15, 10, 10), Vector(10, 15, -32)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/darthvader/darthvader.mdl"] = {5, Angle(-10, 100, -40), Vector(0, 6, -23)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/demonshank/demonshank.mdl"] = {1.2, Angle(-10, 30, 0), Vector(2, -2, -1)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/doctorfez/doctorfez.mdl"] = {1.2, Angle(0, 30, 0), Vector(-1, -3, -1)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/duck/duck.mdl"] = {1.4, Angle(0, 100, 0), Vector(-12, -10, -1)} --https://steamcommunity.com/profiles/76561198047412624 --https://steamcommunity.com/profiles/76561198178396945
MOAT_MODEL_POS["models/custom_prop/moatgaming/dundee/dundee.mdl"] = {4, Angle(0, 0, 0), Vector(8, 20, -15)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/evilplant/evilplant.mdl"] = {1, Angle(0, 120, 0), Vector(0, 0, 5)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/falcon/falcon.mdl"] = {7.5, Angle(0, 120, -40), Vector(0, 0, -40)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/fate/fate.mdl"] = {1.75, Angle(0, 100, 0), Vector(-10, -10, -6)} --https://steamcommunity.com/profiles/76561198083127317
MOAT_MODEL_POS["models/custom_prop/moatgaming/foolish/foolish.mdl"] = {1.75, Angle(0, 120, 0), Vector(-1, -10, -4)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/galactus/galactus.mdl"] = {6, Angle(-20, 30, 0), Vector(19, 0, -90)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/gasmask/gasmask.mdl"] = {1.3, Angle(0, 120, 0), Vector(-5, -5, 2)} --https://steamcommunity.com/profiles/76561198415418635
MOAT_MODEL_POS["models/custom_prop/moatgaming/greyfox/greyfox.mdl"] = {1, Angle(-10, 20, 0), Vector(0, 0, 0.5)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/hannibal/hannibal.mdl"] = {1, Angle(-20, 20, 0), Vector(0, 0, 0)} --https://steamcommunity.com/profiles/76561198131248644 --https://steamcommunity.com/profiles/76561198078658705
MOAT_MODEL_POS["models/custom_prop/moatgaming/hollow/hollow.mdl"] = {1, Angle(0, 100, 0), Vector(2, 0, 0.5)} --https://steamcommunity.com/profiles/76561198170107413 --https://steamcommunity.com/profiles/76561198119109023
MOAT_MODEL_POS["models/custom_prop/moatgaming/isaac/isaac.mdl"] = {1, Angle(0, 130, 0), Vector(1, 0, 2)} --https://steamcommunity.com/profiles/76561198063897852
MOAT_MODEL_POS["models/custom_prop/moatgaming/lvl3/lvl3.mdl"] = {1, Angle(0, 100, 0), Vector(0, 0, 2)} --https://steamcommunity.com/profiles/76561198032670560
MOAT_MODEL_POS["models/custom_prop/moatgaming/magneto/magneto.mdl"] = {1, Angle(0, 100, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198370186210
MOAT_MODEL_POS["models/custom_prop/moatgaming/marshmello/marshmello.mdl"] = {1.1, Angle(0, 120, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198032623360 --desc https://steamcommunity.com/profiles/76561198372000962
MOAT_MODEL_POS["models/custom_prop/moatgaming/megaman/megaman.mdl"] = {1.8, Angle(0, 120, -15), Vector(-3, -5, -6)} --https://steamcommunity.com/profiles/76561198263573605 --https://steamcommunity.com/profiles/76561198837005437
MOAT_MODEL_POS["models/custom_prop/moatgaming/metroid/metroid.mdl"] = {1.7, Angle(-30, 0, 5), Vector(0, 2, 0)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/miraak/miraak.mdl"] = {1.1, Angle(0, 120, 0), Vector(0, -1, 1)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/custom_prop/moatgaming/monstro/monstro.mdl"] = {1, Angle(0, 120, 0), Vector(0, 0, 1)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/moon/moon.mdl"] = {1.4, Angle(0, 120, -35), Vector(0, 0, 1)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/olimar/olimar.mdl"] = {1.3, Angle(0, 0, 0), Vector(0, 0, -15)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/custom_prop/moatgaming/ori/ori.mdl"] = {1.7, Angle(0, 120, -20), Vector(0, 0, -4)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/pennywise/pennywise.mdl"] = {2.9, Angle(0, 120, -45), Vector(0, -3, -20)} --https://steamcommunity.com/profiles/76561198083127317
MOAT_MODEL_POS["models/custom_prop/moatgaming/princess/princess.mdl"] = {1.2, Angle(0,70, 0), Vector(0, 0.1, 0)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/custom_prop/moatgaming/psycho/psycho.mdl"] = {0.8, Angle(0, 120, 0), Vector(0, 0, 3)} --https://steamcommunity.com/profiles/76561197964904352 --https://steamcommunity.com/profiles/76561198081320714 
MOAT_MODEL_POS["models/custom_prop/moatgaming/pumpkin/pumpkin.mdl"] = {1.2, Angle(0, 120, 0), Vector(0, 1, 1)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/redead/redead.mdl"] = {7, Angle(-30, 20, 10), Vector(10, -10, -30)} --https://steamcommunity.com/profiles/76561198032623360
MOAT_MODEL_POS["models/custom_prop/moatgaming/robocop/robocop.mdl"] = {6, Angle(0, 120, -35), Vector(0, 0, -17)} --https://steamcommunity.com/profiles/76561198083127317
MOAT_MODEL_POS["models/custom_prop/moatgaming/saiyanvisor/saiyanvisor.mdl"] = {1.8, Angle(0, 130, 0), Vector(0, -15, -3)} --https://steamcommunity.com/profiles/76561198055419255
MOAT_MODEL_POS["models/custom_prop/moatgaming/sauron/sauron.mdl"] = {1, Angle(0, 20, 0), Vector(-1, 0, 0)} --https://steamcommunity.com/profiles/76561198072904466
MOAT_MODEL_POS["models/custom_prop/moatgaming/scream/scream.mdl"] = {1, Angle(-2, 110, 4), Vector(0, 0, -0.5)} --https://steamcommunity.com/profiles/76561198032623360
MOAT_MODEL_POS["models/custom_prop/moatgaming/shark/shark.mdl"] = {2.3, Angle(0, -30, 20), Vector(-3, -4, -9)} --https://steamcommunity.com/profiles/76561198080210774
MOAT_MODEL_POS["models/custom_prop/moatgaming/shovel/shovel.mdl"] = {1, Angle(3, 120, 0), Vector(4, 0, 3)} --https://steamcommunity.com/profiles/76561198053110209
MOAT_MODEL_POS["models/custom_prop/moatgaming/shredder/shredder.mdl"] = {1.4, Angle(0, 120, -5), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198078658705
MOAT_MODEL_POS["models/custom_prop/moatgaming/skullgirl/skullgirl.mdl"] = {1, Angle(0, 110, -10), Vector(0, 1, 1)} --https://steamcommunity.com/profiles/76561198159143513 --https://steamcommunity.com/profiles/76561198221487344
MOAT_MODEL_POS["models/custom_prop/moatgaming/sortinghat/sortinghat.mdl"] = {1.2, Angle(0, 45, 0), Vector(0, 0, 2)} --https://steamcommunity.com/profiles/76561198039378503 --https://steamcommunity.com/profiles/76561198147600818
MOAT_MODEL_POS["models/custom_prop/moatgaming/spawn/spawn.mdl"] = {4.1, Angle(0, -65, 0), Vector(0, 0, -298)} --https://steamcommunity.com/profiles/76561198147600818
MOAT_MODEL_POS["models/custom_prop/moatgaming/strawhat/strawhat.mdl"] = {4.5, Angle(-10, 20, 0), Vector(-5, 0, -30)} --https://steamcommunity.com/profiles/76561198008752564
MOAT_MODEL_POS["models/custom_prop/moatgaming/thundergod/thundergod.mdl"] = {3, Angle(0, 100, 0), Vector(10, 20, -205)} --https://steamcommunity.com/profiles/76561198083127317
MOAT_MODEL_POS["models/custom_prop/moatgaming/trapper/trapper.mdl"] = {1.4, Angle(0, 120, -20), Vector(0, 0, -1.5)} --https://steamcommunity.com/profiles/76561198260423525 --https://steamcommunity.com/profiles/76561198130208694 --https://steamcommunity.com/profiles/76561198297956765
MOAT_MODEL_POS["models/custom_prop/moatgaming/trihelmet/trihelmet.mdl"] = {1, Angle(-5, 25, 0), Vector(0, 0, 2)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/custom_prop/moatgaming/trooperhelmet/trooperhelmet.mdl"] = {1, Angle(0, 20, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198280317383
MOAT_MODEL_POS["models/custom_prop/moatgaming/vaultboy/vaultboy.mdl"] = {1.1, Angle(-8, 120, -25), Vector(0, 0, 2)}
MOAT_MODEL_POS["models/custom_prop/moatgaming/zero/zero.mdl"] = {1, Angle(0, 0, 0), Vector(0, 0, 0)} --https://steamcommunity.com/profiles/76561198014504949
MOAT_MODEL_POS["models/custom_prop/moatgaming/zhariisos/zhariisos.mdl"] = {12, Angle(0, 120, -30), Vector(9, 0, -100)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/moat/mg_clout_goggles.mdl"] = {1, Angle(0, 10, 0), Vector(-1, 0, 1)} --https://steamcommunity.com/profiles/76561198131248644
MOAT_MODEL_POS["models/moat/mg_fedora.mdl"] = {1.2, Angle(0, 0, 0), Vector(0, 0, 3)} --https://steamcommunity.com/profiles/76561198066398047
MOAT_MODEL_POS["models/moat/mg_hat_checkered_top.mdl"] = {1.2, Angle(0, 0, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198170591969
MOAT_MODEL_POS["models/moat/mg_hat_chicken.mdl"] = {1.4, Angle(0, 10, 0), Vector(0, 0, -1)} --https://steamcommunity.com/profiles/76561198336443426
MOAT_MODEL_POS["models/moat/mg_hat_crown.mdl"] = {1, Angle(0, 0, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198032623360
MOAT_MODEL_POS["models/moat/mg_hat_darkerthenblack.mdl"] = {1.3, Angle(-10, 20, 0), Vector(1, -1, -1)} --https://steamcommunity.com/profiles/76561198078658705
MOAT_MODEL_POS["models/moat/mg_hat_drummer.mdl"] = {1.1, Angle(0, 0, 0), Vector(0, 0, 0)}  --https://steamcommunity.com/profiles/76561198055419255
MOAT_MODEL_POS["models/moat/mg_hat_estilomuerto.mdl"] = {1.2, Angle(0, 0, 0), Vector(0, 0, 3)} --https://steamcommunity.com/profiles/76561198079921687
MOAT_MODEL_POS["models/moat/mg_hat_goofygoober.mdl"] = {1, Angle(-15, 20, 0), Vector(0, 0, -0.6)} --https://steamcommunity.com/profiles/76561198308935218
MOAT_MODEL_POS["models/moat/mg_hat_killerskabuto.mdl"] = {1.1, Angle(0, 10, 0), Vector(-2, 0, 0)} --https://steamcommunity.com/profiles/76561198000172622
MOAT_MODEL_POS["models/moat/mg_hat_krustykrab.mdl"] = {1, Angle(0, 20, 0), Vector(0, 0, -1)} --https://steamcommunity.com/profiles/76561198091374014
MOAT_MODEL_POS["models/moat/mg_hat_kunglao.mdl"] = {1.2, Angle(0, 0, 0), Vector(0, 0, 8)} --https://steamcommunity.com/profiles/76561198177130217
MOAT_MODEL_POS["models/moat/mg_hat_law.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198078658705
MOAT_MODEL_POS["models/moat/mg_hat_lightb.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198066398047
MOAT_MODEL_POS["models/moat/mg_hat_madhatter.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198370186210
MOAT_MODEL_POS["models/moat/mg_hat_multi.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198091506673
MOAT_MODEL_POS["models/moat/mg_hat_narutosleeping.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198263573605
MOAT_MODEL_POS["models/moat/mg_hat_neptune.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198118511409
MOAT_MODEL_POS["models/moat/mg_hat_packman.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/moat/mg_hat_robloxmoney.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198346567729
MOAT_MODEL_POS["models/moat/mg_hat_robotchicken.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 2)} --https://steamcommunity.com/profiles/76561198180785973
MOAT_MODEL_POS["models/moat/mg_hat_skullcage.mdl"] = {1.1, Angle(0, 20, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198370186210
MOAT_MODEL_POS["models/moat/mg_hat_spinny.mdl"] = {1.1, Angle(0, 10, 0), Vector(0, 0, 2)}
MOAT_MODEL_POS["models/moat/mg_hat_sun.mdl"] = {1.3, Angle(0, 10, 0), Vector(0, 0, 4)} --https://steamcommunity.com/profiles/76561198848472950
MOAT_MODEL_POS["models/moat/mg_hat_teemo.mdl"] = {1.2, Angle(0, 5, 0), Vector(0, 0, 4)} --https://steamcommunity.com/profiles/76561198103980755
MOAT_MODEL_POS["models/moat/mg_hat_unbrella.mdl"] = {1.3, Angle(0, 5, 0), Vector(0, 0, 10)} --https://steamcommunity.com/profiles/76561198039378503
MOAT_MODEL_POS["models/moat/mg_helmet_iron.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198149633590
MOAT_MODEL_POS["models/moat/mg_mask_hattington.mdl"] = {1, Angle(0, 20, 0), Vector(0, 0, 0)} --https://steamcommunity.com/profiles/76561198156952766
MOAT_MODEL_POS["models/sterling/mg_hat_number1.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198001255902
MOAT_MODEL_POS["models/sterling/mg_hat_punk.mdl"] = {1.1, Angle(0, 5, 0), Vector(0, 0, 1)} --https://steamcommunity.com/profiles/76561198079189535

MOAT_MODEL_POS["models/custom_prop/moatgaming/eastbunny/eastbunny.mdl"] = {1.2, Angle(0, 100, 0), Vector(0, 0, 0)}

function moat_retry_tts_play(sound_url)
    sound.PlayURL(sound_url, "mono", function(ttssound, error, error2)
        if (IsValid(ttssound)) then
            ttssound:Play()
            ttssound:SetVolume(2)
        end
    end, function(err) moat_retry_tts_play(sound_url) end)
end

function moat_retry_tts(text)
    http.Fetch("https://www.aritzcracker.ca/texttospeech/?words=" .. tostring(text), function(res)
        local result = string.Explode("body>", res)
        local result2 = string.Explode("<audio", result[2])

        moat_retry_tts_play(result2[1]:Trim())
    end, function(res) moat_retry_tts(text) end)
end

timer.Simple(5, function()
    /*
    hook.Add("OnPlayerChat", "moat_ttshook", function(ply, text, team, dead)
        if (IsValid(ply) and (ply:SteamID() == "" or (ply:SteamID() == "STEAM_0:1:123196627" and ply == LocalPlayer()) or (ply:SteamID() == "STEAM_0:1:46918472" and ply == LocalPlayer()) or (ply:SteamID() == "STEAM_0:1:53792094" and ply == LocalPlayer())) and (GetConVar("moat_text_to_speech"):GetInt() == 1) and not team and LocalPlayer():IsActive() == ply:IsActive() and LocalPlayer():IsSpec() == ply:IsSpec()) then
            sound.PlayURL("https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&q=" .. tostring(text) .. "&tl=en", "mono", function(ttssound, error, error2)
            --sound.PlayURL("https://www.aritzcracker.ca/texttospeech/?words=" .. tostring(text), "mono", function(ttssound, error, error2)
                if (IsValid(ttssound)) then
                    ttssound:Play()
                    ttssound:SetVolume(2)
                end
            end)

            --moat_retry_tts(text)
        end
    end)*/
end)


/*
local function Bunnyhop()
    if (GetConVar("moat_bunny_hop"):GetInt() == 1 and LocalPlayer():Team() ~= TEAM_SPEC and gui.MouseX() == 0 and gui.MouseY() == 0) then
        if input.IsKeyDown(KEY_SPACE) then
            if LocalPlayer():IsOnGround() then
                RunConsoleCommand("+jump")
                timer.Create("Bhop", 0, 0.01, function()
                    RunConsoleCommand("-jump")
                end)
            end
        end
    end
end

hook.Add("Think", "BunnyhopScript", Bunnyhop)*/


-- To allow other mods to mirror the world, we add this get/set function
local cvar = CreateClientConVar("moat_map_invert", "0", true, false )
local wacky_round = {
    ["Inverted Map"] = true
}

function _G:GetMirrorWorld()
    local server = 0
    local client=cvar:GetInt();

    return (server > 0 and server <= 2) or (server == 0 and client > 0 and client <= 2) or (wacky_round[cur_random_round] == true);
end
function _G:GetMirrorWorld_HUD()
    local server = 0
    local client=cvar:GetInt();

    return (server == 2 or client == 2);
end

-- View model flip
local lastSetting=false
hook.Add("Think","Mirror.Think",function()
    if lastSetting ~= GetMirrorWorld() then
        lastSetting=GetMirrorWorld()

        for _,tab in ipairs(weapons.GetList())do
            tab=weapons.GetStored(tab.ClassName)
            tab.ViewModelFlip = not tab.ViewModelFlip;
        end

        for _,tab in ipairs(LocalPlayer():GetWeapons())do
            tab.ViewModelFlip = not tab.ViewModelFlip;
        end
    end
end)

-- Variables
local View;
local rtPrev;
local rtMirror = render.GetMorphTex0();

-- Set up the render target and material to do the transformation
local MirroredMaterial = CreateMaterial("MirroredMaterial", "UnlitGeneric", {
        [ '$basetexture' ] = rtMirror,
        [ '$basetexturetransform' ] = "center .5 .5 scale -1 1 rotate 0 translate 0 0",
        [ '$nocull' ] = "1",
});

-- Render our mirrored scene
hook.Add( "RenderScene", "Mirror.RenderScene", function( pos, ang )
    if GetMirrorWorld(_G) then
        -- Save our previous RT
        rtPrev = render.GetRenderTarget();

        -- Setup the view table
        View = {x=0,y=0,w=ScrW(),h=ScrH(),origin=pos,angles=ang};

        -- Push the RT and render
        render.SetRenderTarget( rtMirror );
        render.Clear( 0, 0, 0, 255, true );
        render.ClearDepth();
        render.ClearStencil();

        render.PushFilterMag( TEXFILTER.ANISOTROPIC )
        render.PushFilterMin( TEXFILTER.ANISOTROPIC )

        render.RenderView( View );

        render.PopFilterMag()
        render.PopFilterMin()

        if _G:GetMirrorWorld_HUD() then
            render.RenderHUD(0,0,ScrW(),ScrH());
        end
        -- Go back to the previous RT we stored earlier
        render.SetRenderTarget( oldrt );

        -- Setup our MirroredMaterial.
        MirroredMaterial:SetTexture( "$basetexture", rtMirror );

        -- Draw
        render.SetMaterial( MirroredMaterial );
        render.DrawScreenQuad();

        if not _G:GetMirrorWorld_HUD() then
            -- We don't want the HUD to get mirrored too, so we draw it here.
            render.RenderHUD(0,0,ScrW(),ScrH());
        end

        -- Supress RenderScene
        return true;
    end
end )

-- Apply some transformations to the Vector.ToScreen method.
local VECTOR = FindMetaTable("Vector");
local oldToScreen = VECTOR.ToScreen;
function VECTOR:ToScreen()
    if not GetMirrorWorld(_G) then return oldToScreen(self) end

    local pos = oldToScreen(self);
    pos.x = pos.x * -1 + ScrW();
    return pos;
end

-- Parse input from the mouse and keyboard to work with out new view.
hook.Add( "InputMouseApply", "com.casualbananas.MirrorWorld.FlipMouse", function(cmd, x, y, angle)
    if GetMirrorWorld(_G) then
        local pitchchange = y * GetConVar( "m_pitch" ):GetFloat();
        local yawchange = x * -GetConVar( "m_yaw" ):GetFloat();

        angle.p = angle.p + pitchchange * 1;
        angle.y = angle.y + yawchange * -1;

        cmd:SetViewAngles( angle );

        return true;
    end

end)
hook.Add( "CreateMove", "com.casualbananas.MirrorWorld.FlipMovement", function(cmd)
    if GetMirrorWorld(_G) then
        local forward = 0;
        local right = 0;
        local maxspeed = LocalPlayer():GetMaxSpeed();

        if cmd:KeyDown( IN_FORWARD ) then
            forward = forward + maxspeed;
        end
        if cmd:KeyDown( IN_BACK ) then
            forward = forward - maxspeed;
        end
        if cmd:KeyDown( IN_MOVERIGHT ) then
            right = right - maxspeed;
        end
        if cmd:KeyDown( IN_MOVELEFT ) then
            right = right + maxspeed;
        end

        cmd:SetForwardMove( forward );
        cmd:SetSideMove( right );
    end
end)
/*
hook.Add("EntityEmitSound", "moat_mirror_sounds", function(t)
    if GetMirrorWorld(_G) then
        local p = t.Pos
        local lp = LocalPlayer():GetShootPos()
        local newpos = {
            distx = math.abs(p.x) - math.abs(lp.x),
            disty = math.abs(p.y) - math.abs(lp.y)
        }
        local newposx = 0
        local newposy = 0

        if (p.x > lp.x) then
            newposx = lp.x - newpos.distx
        else
            newposx = lp.x + newpos.distx
        end

        if (p.y > lp.y) then
            newposy = lp.x - newpos.disty
        else
            newposy = lp.x + newpos.disty
        end

        t.Pos.x = newposx
        t.Pos.y = newposy

        return true
    end
end)

hook.Add("EntityEmitSound", "moat_mirror_sounds", function(soundtbl)
    if (GetMirrorWorld(_G) and soundtbl.Pos) then
        local p = soundtbl.Pos
        
        local lp = LocalPlayer():GetShootPos()
        local newpos = {
            distx = math.abs(math.abs(soundtbl.Pos.x) - math.abs(lp.x)),
            disty = math.abs(math.abs(soundtbl.Pos.y) - math.abs(lp.y))
        }
        local newposx = 0
        local newposy = 0

        if (soundtbl.Pos.x > lp.x) then
            newposx = lp.x - newpos.distx
        else
            newposx = lp.x + newpos.distx
        end

        if (soundtbl.Pos.y > lp.y) then
            newposy = lp.x - newpos.disty
        else
            newposy = lp.x + newpos.disty
        end

        soundtbl.Pos.x = newposx
        soundtbl.Pos.y = newposy

        return true
    end
end)*/